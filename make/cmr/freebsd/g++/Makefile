#############################################################################
# Makefile for building targets in sub directories.
# Generated by tmake;
#     Project: rootmake
#    Template: subdirs
#############################################################################

MAKEFILE=	Makefile
TMAKE	=	tmake

SUBDIRS	=	ta_common \
		ta_func \
		ta_abstract \
		ta_libc \
		gen_code \
		ta_regtest

all: $(SUBDIRS)

$(SUBDIRS): FORCE
	cd $@; $(MAKE)

tmake: ../cmr/freebsd/g++/Makefile

../cmr/freebsd/g++/Makefile: rootmake.pro
	tmake rootmake.pro -o ../cmr/freebsd/g++/Makefile

tmake_all:
	for i in $(SUBDIRS); do ( if [ -d $$i ]; then cd $$i ; $(MAKE) -f $(MAKEFILE) tmake_all || true; fi; ) ; done

####	$text = "\t" . 'for i in $(SUBDIRS); do ( if [ -d $$i ]; then cd $$i ; pro=`basename $$i`.pro ; $(TMAKE) $$pro -o $(MAKEFILE); grep "TEMPLATE.*subdirs" $$pro 2>/dev/null >/dev/null && $(MAKE) -f $(MAKEFILE) tmake_all || true; fi; ) ; done';

clean release debug:
	for i in $(SUBDIRS); do ( if [ -d $$i ]; then cd $$i ; $(MAKE) $@; fi; ) ; done

FORCE:
